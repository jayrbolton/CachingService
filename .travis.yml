sudo: required
services:
- docker
language: python
script:
- cp .env.example .env
- docker-compose run make test_local
- make test
env:
  global:
    # The following secure env vars are SECRET_KEY, MINIO_SECRET_KEY, and KB_AUTH_TOKEN
  - secure: S9EbgMOR8k0O6LY+dHXyEIh0Vg87vXHnJYxHYa34NVHOjfx58o1CFaoUQYFPrj5AveWS3eaZ5x/LU7GdkqKhqEGcB9qKEZVzD0Sgf58YzbuxCMtRtQUPWSQHrAmcsigElksEpGgbS9y0c2VFhyvgAMN7o6qdcbqMfxpGnKugKUOQoJNzl3Uxbqcv4jw6nXOvSL/a/Ry9zwVIkpJy2YZKtGrlAWzFwkdCDn5lYSAAlCvk58y89MMy11al2pDcz/7LHItDZwMkEU3ABIezqnUYzH+JeWq/3s7WI3hm6/0NWJq/qjPtkwW4JK03SdSsqeFPXEBOympQ39olv/vsvvSvLmWy1xQwPzoW8/kA+coRFOIkrT2Mnq87LIX2pTiPUeZKt7RNLoi6di/189i/wpn8cLVDgQPjTHCl4gbb58lXuP3xq90gJ9EeNnrjxjPxkAPwd/ROZcnf3vxuXUlEydlct26mAjrdK6+Xioz6c1iQe5ojdDT1FR+7/nPwkAfRrLN4+Ob0VIBwndq3oL1S8Jz0hJMyq6XlQ+G4VYmGZM6b4YO4C0l5dLsDKVw4XXVYLy7LUU+3e9U7/RVO5YUsCBuJAX8XGWOZBxRlQ4QIrFQOYrDGVDYhxZHx61CSwW9Kg5HahrKVBfa3bdW/VDFlKwguOTOf2zBzhCkfk5Y5hWAO8hQ=
  - secure: m/YBKRTAYk+GVQwCxYZdOOThgYqtkSTCVnCrUowLhmrQJ+lPm42GewqRR74G/s3lEY7gHowNLhLMR4XHKYnoPh4Lyz7U5GgLmsbr3D08NUtyesEnIkzgQKsyx4SEthxA0rdaL28Oa7A9oqwM3AZq9ESkKqbZRgtxPqwzeAUcSZSVnmcpX1ts7tVyR4R5sDUW9pOnxvBy+youkUdky3GApJSY1gmFBFXTYMobi6p4JcCFmQPqQD+t7Z43M6zzP6iAvv8bk4BrEELwQ0cFiS1QA28eUwdT/Q3h2DyuHD8Z89p9zpP7qw3PfhsUaxGwQx9rQ4dIyTA/NTjdxE/mdgV5uLfhVAWNGNFb46f6S4J5eoequuEykSKfUyZDESbeE6Ni/jKTCwhPt9ycMCLN132qz3phqP+p6F5g8FaOpu4bsW9p9LI7ny+3ASml4VsAxouSXt5AMWaIPDvxJvuBaZr7STz49e+7Xww6HuK/HYxmqWPs5l9+PH7gYl78Da7jr8laiC9be7iHumFlrgRDMoRueYSww8JeV7/MQu9RAGy0SoI3xFDgPbesYPIsiIPpljgxRrVLm52EICo3S2K1jsijTuJBsE+Nu0Tor0QZDjRnav1/5zkQT7J1WWeTn1kxK3CZw+4kjr1Xp7h4Z9O6hxDRQnM54PL6DNLdWhTfcbbSFDU=
  - secure: TL6y7is+ZX4E7k+kHcGWAMMyT8ZqkedT6ysmzyxiFg0zdF+g+qMSXbdYjvjyZZEBiUmOCpDLs5nZLJtLkHgbjRVpQEg0ZZ7c3OHlew1m0lB9MeXpS50dwOdIBCQ0LbOR23R8WNApnh5qMf6ymCxxkwjCdd0kJDswwjXfrmFHTl/kFt+xuIZVu9Gpmw4LqW2drfJsTBZKNPKq33XgKCBDa/BqI1hlY77Fryj6I2/8QOT0YTKkGqefHSSPUdjzbM7CR6+vsQL+Urr8aUs0BzzYUk45oNFlpBbLWvWaZz/omqG+Rt08HNh4ateMqwXBuG70XHAosxqGx4Sne4Q8v2JsppQ14DuuCjKs2MjwMu4v1GaPAoGSuGCSnQOs2xwF1SexzkV+USYhTyelE1qQ2URcTfFqzIEpVLxxRRCgfmVoSDrx8efUu+/h3JMX00x65faMaM1KNgt+gRmtvH8FypfGVSu9plLkEJa8lF/+G1EHEnC22z5ZLSdi0QQYV/Cwr+jfr998JhjuCGNFbbCg8YQ8LvrCTU2IDd8tHhkXIyxKpbE+gqgOcQekTcrUAwMA2CAPpw9o4q8pw6COAlGixjUsTCI3Ylz9CKzhx5Mz8yaRB+UTHkTFAIza1jhq0Zz0Hybgj270OBtAYI+eS0/vcN9AHPWomyWNU2ciAxeynErkpPo=
